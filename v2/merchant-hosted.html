

<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Merchant Hosted</title>
    <meta charset="utf-8">
    <meta name="description" content="Latipay">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Merchant Hosted">
    <meta property="og:description" content="Latipay">
    <meta property="og:image" content="https://latipay.net//images/logo.png">

    <link rel="icon" href="https://merchant.latipay.net/favicon.ico">

    <meta name="msapplication-TileColor" content="#4fc08d">
    <meta name="theme-color" content="#4fc08d">

    <meta name="msapplication-config" content="browserconfig.xml">
    <link rel="manifest" href="/manifest.json">

    <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600|Roboto Mono' rel='stylesheet' type='text/css'>

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- main page styles -->
    <link rel="stylesheet" href="/css/page.css">

    <script>window.PAGE_TYPE = "v2"</script>

  </head>
  <body class="docs">
    <div id="mobile-bar" >
      <a class="menu-button"></a>
      <a class="logo" href="/"></a>
    </div>
    <div id="header">
  <a id="logo" href="/">
    <img src="/images/logo.svg">
  </a>
</div>
    
      <div id="main" class="fix-sidebar">
        
          
  <div class="sidebar">
  <div class="sidebar-inner">
    <div class="list">
      <h2>
        V2
      </h2>
      <ul class="menu-root">
  
    <li>
      <a href="/v2/index.html" class="sidebar-link">Introduction</a>
    </li>
  
    <li>
      <a href="/v2/latipay-hosted.html" class="sidebar-link">Latipay Hosted</a>
    </li>
  
    <li>
      <a href="/v2/merchant-hosted.html" class="sidebar-link current">Merchant Hosted</a>
    </li>
  
    <li>
      <a href="/v2/in-store-payment.html" class="sidebar-link">In-store Payment Solution(WeChat / Alipay)</a>
    </li>
  
    <li>
      <a href="/v2/error-code.html" class="sidebar-link">Error Code</a>
    </li>
  
</ul>

    </div>
  </div>
</div>


<div class="content v2 with-sidebar ">
  
    
      
    
  
  
    <h1>Merchant Hosted</h1>
  
  <h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>Powerful and robust online payment solutions, which work on a range of platforms which include website, billing software and Applications. Latipay provides partnership merchants with the interface for developing custom built payment solution.</p>
<h2 id="How-it-works"><a href="#How-it-works" class="headerlink" title="How it works?"></a>How it works?</h2><p>Here are two scenarios based on the payment methods.</p>
<h4 id="For-Wechat-Pay-Alipay"><a href="#For-Wechat-Pay-Alipay" class="headerlink" title="For Wechat Pay / Alipay"></a>For Wechat Pay / Alipay</h4><p><img src="http://latipay.net/wp-content/uploads/images/02_-_Online_payment_workflow_-_merchant_hosted_-_QR.png" alt=""></p>
<ol>
<li><p>To process a transaction, customers select Latipay Wechat pay or Alipay as payment method, then the merchant sends a request to Latipay partnership merchant.</p>
</li>
<li><p>Latipay partnership merchant sends a request to /transaction with the authentication details</p>
</li>
<li><p>Latipay responds with a nonce and host_url</p>
</li>
<li><p>Latipay partnership merchant responds with a unique URI for an SSL secure payments page</p>
</li>
<li><p>The merchant shopping cart uses the returned URI to redirect the customer to the secure Latipay<br>partnership merchant hosted payments page.</p>
</li>
<li><p>Latipay partnership merchant use the host_url and noune to request a QR code.</p>
</li>
<li><p>Latipay responds a QR code Url, then the QR code will display in Latipay partnership merchant hosted<br>page. The customer will be prompted to scan the QR code and complete the payment.</p>
</li>
<li><p>Latipay partnership merchant query the payment status from Latipay</p>
</li>
<li><p>Latipay updates the payment status</p>
</li>
<li><p>The result is displayed and automatically redirected back to the merchant’s website.</p>
</li>
</ol>
<h4 id="For-Online-Bank"><a href="#For-Online-Bank" class="headerlink" title="For Online Bank"></a>For Online Bank</h4><p><img src="http://latipay.net/wp-content/uploads/images/03_-_Online_payment_workflow_-_merchant_hosted_-_Bank.png" alt=""></p>
<ol>
<li><p>To process a transaction, customers select Latipay Online Banking as payment method, then the merchants send a request to Latipay partnership merchant.</p>
</li>
<li><p>Latipay partnership merchant sends a request to /queryBankList with the authentication details.</p>
</li>
<li><p>Latipay responds with a banklist JSON.</p>
</li>
<li><p>Latipay partnership merchant responds with a unique URI for an SSL secure payments to merchant website.</p>
</li>
<li><p>The merchant webpage will redirect to Latipay partnership merchant’s hosted bank list webpage, then the customer can select the preferred Chinese bank.</p>
</li>
<li><p>A payment order request will be submitted to Latipay partnership merchant server</p>
</li>
<li><p>Latipay partnership merchant server will send the order</p>
</li>
<li><p>Once the payment completed, a response will be sent to Latipay partnership merchant’s hosted bank webpage and Latipay partnership merchant server</p>
</li>
<li><p>Latipay partnership merchant sends a request to /unified Order with the authentication details</p>
</li>
<li><p>Latipay responds with the gateway data and gateway url</p>
</li>
<li><p>Latipay partnership merchant server responds the gateway data and gateway url to the Latipay partnership merchant’s hosted webpage.</p>
</li>
<li><p>Latipay partnership merchant’s hosted webpage submits the gateway data to gateway url. The Chinese bank webpage, which is selected by the customer, will be displayed. The customer will be prompted to enter their bank card’s details and complete the payment.</p>
</li>
<li><p>The result is displayed and the customer is automatically redirected back to the merchant’s website (success or fail page).</p>
</li>
</ol>
<h2 id="Payment-Scenarios"><a href="#Payment-Scenarios" class="headerlink" title="Payment Scenarios"></a>Payment Scenarios</h2><h4 id="Alipay"><a href="#Alipay" class="headerlink" title="Alipay"></a>Alipay</h4><p><img src="http://latipay.net/wp-content/uploads/images/Alipay_MerchantHosted.png" alt=""></p>
<hr>
<h4 id="WeChat-Pay"><a href="#WeChat-Pay" class="headerlink" title="WeChat Pay"></a>WeChat Pay</h4><p><img src="http://latipay.net/wp-content/uploads/images/Wechat_MerchantHosted.png" alt=""></p>
<hr>
<h4 id="Online-Bank"><a href="#Online-Bank" class="headerlink" title="Online Bank"></a>Online Bank</h4><p><img src="http://latipay.net/wp-content/uploads/images/Olinebank_MerchantHosted.png" alt=""></p>
<hr>
<h4 id="Website-check-out-page"><a href="#Website-check-out-page" class="headerlink" title="Website check-out page"></a>Website check-out page</h4><p><img src="http://latipay.net/wp-content/uploads/images/checkout_show.png" alt=""></p>
<hr>
<h2 id="API-List"><a href="#API-List" class="headerlink" title="API List"></a>API List</h2><h3 id="Transaction-Interface-WeChat-and-Alipay"><a href="#Transaction-Interface-WeChat-and-Alipay" class="headerlink" title="Transaction Interface - WeChat and Alipay"></a>Transaction Interface - WeChat and Alipay</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">POST https://api.latipay.net/v2/transaction</span><br></pre></td></tr></table></figure>
<h4 id="Parameters"><a href="#Parameters" class="headerlink" title="Parameters:"></a>Parameters:</h4><table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Nullable</th>
</tr>
</thead>
<tbody>
<tr>
<td>signature</td>
<td>String</td>
<td>The SHA-256 HMAC API signature.</td>
<td>No</td>
</tr>
<tr>
<td>wallet_id</td>
<td>String</td>
<td>The ID of the wallet you want to use.</td>
<td>No</td>
</tr>
<tr>
<td>amount</td>
<td>String</td>
<td>A decimal amount.</td>
<td>No</td>
</tr>
<tr>
<td>user_id</td>
<td>String</td>
<td>The user account you want to use to process the transaction.</td>
<td>No</td>
</tr>
<tr>
<td>merchant_reference</td>
<td>String</td>
<td>A field for identifying your transaction.</td>
<td>No</td>
</tr>
<tr>
<td>currency</td>
<td>String</td>
<td>The currency code of the transaction.</td>
<td>No</td>
</tr>
<tr>
<td>return_url</td>
<td>String</td>
<td>The URL of the landing page where Latipay will return the customer after payment.</td>
<td>No</td>
</tr>
<tr>
<td>callback_url</td>
<td>String</td>
<td>The URL of the callback address the transaction notification is sent after payment.</td>
<td>No</td>
</tr>
<tr>
<td>ip</td>
<td>String</td>
<td>The IP address of the customer.</td>
<td>No</td>
</tr>
<tr>
<td>version</td>
<td>String</td>
<td>The latest version of the platform.</td>
<td>No</td>
</tr>
<tr>
<td>product_name</td>
<td>String</td>
<td>The name of the product or service being sold.</td>
<td>No</td>
</tr>
<tr>
<td>payment_method</td>
<td>String</td>
<td>Payment method options are wechat, alipay, or onlineBank.</td>
<td>No</td>
</tr>
<tr>
<td>host_type</td>
<td>String</td>
<td>must be “1”, which means Merchant hosted.</td>
<td>No</td>
</tr>
</tbody>
</table>
<h4 id="Example-Parameters"><a href="#Example-Parameters" class="headerlink" title="Example Parameters"></a>Example Parameters</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"signature"</span>: <span class="string">"14d5b06a2a5a2ec509a148277ed4cbeb3c43301b239f080a3467ff0aba4070e3"</span>,</span><br><span class="line">  <span class="attr">"wallet_id"</span>: <span class="string">"W00000001"</span>,</span><br><span class="line">  <span class="attr">"amount"</span>: <span class="string">"120.00"</span>,</span><br><span class="line">  <span class="attr">"user_id"</span>: <span class="string">"U000334333"</span>,</span><br><span class="line">  <span class="attr">"merchant_reference"</span>: <span class="string">"dsi39ej430sks03"</span>,</span><br><span class="line">  <span class="attr">"currency"</span>: <span class="string">"AUD"</span>,</span><br><span class="line">  <span class="attr">"return_url"</span>: <span class="string">"https://merchantsite.com/checkout"</span>,</span><br><span class="line">  <span class="attr">"callback_url"</span>: <span class="string">"https://merchantsite.com/confirm"</span>,</span><br><span class="line">  <span class="attr">"ip"</span>: <span class="string">"122.122.122.1"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"2.0"</span>,</span><br><span class="line">  <span class="attr">"product_name"</span>: <span class="string">"Pinot Noir, Otago"</span>,</span><br><span class="line">  <span class="attr">"payment_method"</span>: <span class="string">"alipay"</span>,</span><br><span class="line">  <span class="attr">"host_type"</span> : <span class="string">"1"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="SHA-256-HMAC-Signature"><a href="#SHA-256-HMAC-Signature" class="headerlink" title="SHA-256 HMAC Signature"></a>SHA-256 HMAC Signature</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">message: user_id + wallet_id + amount + payment_method + return_url + callback_url</span><br><span class="line">secret: api_key</span><br></pre></td></tr></table></figure>
<h4 id="Example-Signature"><a href="#Example-Signature" class="headerlink" title="Example Signature"></a>Example Signature</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">message: U000000001W000000010.01alipayhttp://merchant.com/returnhttp://merchant.com/callback</span><br><span class="line">secret: 111222333</span><br><span class="line"></span><br><span class="line">signature: 2367bcd9e9a2f9a547c85d7545d1217702a574b8084bbb7ae33b45a03a89983</span><br></pre></td></tr></table></figure>
<h4 id="Response"><a href="#Response" class="headerlink" title="Response"></a>Response</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"signature"</span>: <span class="string">"14d5b06a2a5a2ec509a148277ed4cbeb3c43301b239f080a3467ff0aba4070e3"</span>,</span><br><span class="line">  <span class="attr">"host_url"</span>: <span class="string">"https://api.latipay.net/merchanthosted/transaction/"</span>,</span><br><span class="line">  <span class="attr">"nonce"</span>: <span class="string">"7d5a88119354301ad3fc250404493bd27abf4467283a061d1ed11860a46e1bf3"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>signature</td>
<td>String</td>
<td>The SHA-256 HMAC API signature.</td>
</tr>
<tr>
<td>host_url</td>
<td>String</td>
<td>The host URL to send your customer. The nonce should be appended to the end.</td>
</tr>
<tr>
<td>nonce</td>
<td>String</td>
<td>The transaction nonce must be appended to the pay URL.</td>
</tr>
</tbody>
</table>
<h4 id="Signature-in-Response"><a href="#Signature-in-Response" class="headerlink" title="Signature in Response"></a>Signature in Response</h4><p>For security reasons, we highly recommend you verify the signature in the response.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">message: nonce + host_url</span><br><span class="line">secret: api_key</span><br></pre></td></tr></table></figure>
<h3 id="Payment-Interface"><a href="#Payment-Interface" class="headerlink" title="Payment Interface"></a>Payment Interface</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">POST &#123;host_url&#125;/&#123;nonce&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://api.latipay.net/merchanthosted/transaction/7d5a88119354301ad3fc250404493bd27abf4467283a061d1ed11860a46e1bf3</span><br></pre></td></tr></table></figure>
<h4 id="Response-1"><a href="#Response-1" class="headerlink" title="Response"></a>Response</h4><table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>code</td>
<td>Integer</td>
<td>The response code of payment, 0 or error code.</td>
</tr>
<tr>
<td>message</td>
<td>String</td>
<td>The response message of payment interface.</td>
</tr>
<tr>
<td>data</td>
<td>Object</td>
<td>The response of payment interface.</td>
</tr>
</tbody>
</table>
<p>the <code>data</code> object</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>order_id</td>
<td>String</td>
<td>A unique transaction identifier generated by Latipay.</td>
</tr>
<tr>
<td>nonce</td>
<td>String</td>
<td>A unique transaction nonce generated by Latipay.</td>
</tr>
<tr>
<td>payment_method</td>
<td>String</td>
<td>Payment method options are wechat, alipay, or onlineBank.</td>
</tr>
<tr>
<td>amount</td>
<td>String</td>
<td>A decimal amount.</td>
</tr>
<tr>
<td>amount_cny</td>
<td>String</td>
<td>A decimal amount.</td>
</tr>
<tr>
<td>currency</td>
<td>String</td>
<td>The currency code of the transaction.</td>
</tr>
<tr>
<td>product_name</td>
<td>String</td>
<td>The name of the product or service being sold.</td>
</tr>
<tr>
<td>organisation_id</td>
<td>Integer</td>
<td>The merchant id which is used to process the transaction.</td>
</tr>
<tr>
<td>org_name</td>
<td>String</td>
<td>The merchant’s name</td>
</tr>
<tr>
<td>user_id</td>
<td>String</td>
<td>The user account which is used to process the transaction.</td>
</tr>
<tr>
<td>user_name</td>
<td>String</td>
<td>The user account’s name</td>
</tr>
<tr>
<td>wallet_id</td>
<td>String</td>
<td>The user wallet account which is used to process the transaction.</td>
</tr>
<tr>
<td>wallet_name</td>
<td>String</td>
<td>The wallet account’s name</td>
</tr>
<tr>
<td>qr_code</td>
<td>String</td>
<td>The QR code is generate by Latipay or third gateway.</td>
</tr>
<tr>
<td>currency_rate</td>
<td>String</td>
<td>The rate which is used to the transaction.</td>
</tr>
<tr>
<td>merchant_reference</td>
<td>String</td>
<td>A field for identifying your transaction.</td>
</tr>
<tr>
<td>signature</td>
<td>String</td>
<td>The SHA-256 HMAC API signature.</td>
</tr>
</tbody>
</table>
<h4 id="Example-1"><a href="#Example-1" class="headerlink" title="Example"></a>Example</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"code"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"message"</span>: <span class="string">"SUCCESS"</span>,</span><br><span class="line">    <span class="attr">"data"</span>: &#123;</span><br><span class="line">        <span class="attr">"order_id"</span> : <span class="string">"20170829-alipay-3990527237343"</span>,</span><br><span class="line">        <span class="attr">"nonce"</span> : <span class="string">"7d5a88119354301ad3fc250404493bd27abf4467283a061d1ed11860a46e1bf3"</span>,</span><br><span class="line">        <span class="attr">"payment_method"</span> : <span class="string">"alipay"</span>,</span><br><span class="line">        <span class="attr">"amount"</span> : <span class="string">"1.00"</span>,</span><br><span class="line">        <span class="attr">"amount_cny"</span> : <span class="string">"5.00"</span>,</span><br><span class="line">        <span class="attr">"currency"</span> : <span class="string">"NZD"</span>,</span><br><span class="line">        <span class="attr">"product_name"</span> : <span class="string">"test"</span>,</span><br><span class="line">        <span class="attr">"organisation_id"</span>: <span class="number">18</span>,</span><br><span class="line">        <span class="attr">"org_name"</span> : <span class="string">"Latipay"</span>,</span><br><span class="line">        <span class="attr">"user_id"</span> : <span class="string">"U000000051"</span>,</span><br><span class="line">        <span class="attr">"user_name"</span> : <span class="string">"Latipay test"</span>,</span><br><span class="line">        <span class="attr">"wallet_id"</span> : <span class="string">"W000000037"</span>,</span><br><span class="line">        <span class="attr">"wallet_name"</span> : <span class="string">"aud01"</span>,</span><br><span class="line">        <span class="attr">"qr_code"</span> : <span class="string">"https://qr.alipay.com/bax03286h4vlfpxldgwq4035"</span>,</span><br><span class="line">        <span class="attr">"currency_rate"</span> : <span class="string">"5.29930"</span>,</span><br><span class="line">        <span class="attr">"merchant_reference"</span> : <span class="string">"dsi39ej430sks03"</span>,</span><br><span class="line">        <span class="attr">"signature"</span>:<span class="string">"25e6e72cc6sdfecger95713afb101015aasdf3ca5faf3sdeer851f9cb7fb008a"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="SHA-256-HMAC-Signature-1"><a href="#SHA-256-HMAC-Signature-1" class="headerlink" title="SHA-256 HMAC Signature"></a>SHA-256 HMAC Signature</h4><p>Rearrange parameters in the <code>data</code> set alphabetically (except <code>signature</code> and other parameters with value of null or empty string) And connect rearranged parameters with &amp;：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">message: amount=1.00&amp;amount_cny=5.00&amp;currency=NZD&amp;currency_rate=5.29930&amp;merchant_reference=dsi39ej430sks03&amp;nonce=7d5a88119354301ad3fc250404493bd27abf4467283a061d1ed11860a46e1bf3&amp;order_id=20170829-alipay-3990527237343&amp;organisation_id=18&amp;org_name=Latipay&amp;payment_method=alipay&amp;product_name=test&amp;qr_code=https://qr.alipay.com/bax03286h4vlfpxldgwq4035&amp;type=Online&amp;user_id=U000000051&amp;wallet_id=W000000037&amp;wallet_name=aud01</span><br><span class="line">secret: api_key</span><br></pre></td></tr></table></figure>
<h3 id="Payment-Result-Asynchronous-Notification"><a href="#Payment-Result-Asynchronous-Notification" class="headerlink" title="Payment Result Asynchronous Notification"></a>Payment Result Asynchronous Notification</h3><p>There is an asynchronous and back-end payment result notification sent by Latipay to merchant after the payment is done successfully. There is a re-try mechanism with the notification to ensure the notification could be delivered to the merchant.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">POST merchant&apos;s callback_url</span><br></pre></td></tr></table></figure>
<h4 id="Parameters-1"><a href="#Parameters-1" class="headerlink" title="Parameters:"></a>Parameters:</h4><table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>signature</td>
<td>String</td>
<td>The SHA-256 HMAC API signature.</td>
</tr>
<tr>
<td>transaction_id</td>
<td>String</td>
<td>f66f-4f1b-9ef5-43cb917ff8a6 (string) - A unique transaction identifier generated by Latipay.</td>
</tr>
<tr>
<td>merchant_reference</td>
<td>String</td>
<td>A field for identifying your transaction.</td>
</tr>
<tr>
<td>currency</td>
<td>String</td>
<td>The currency code of the transaction.</td>
</tr>
<tr>
<td>amount</td>
<td>String</td>
<td>A decimal amount.</td>
</tr>
<tr>
<td>payment_method</td>
<td>String</td>
<td>The payment method used. Possible values are wechat, alipay, onlineBank.</td>
</tr>
<tr>
<td>status</td>
<td>String</td>
<td>The status of the transaction. Possible values are: pending, paid, or failed.</td>
</tr>
<tr>
<td>pay_time</td>
<td>String</td>
<td>Show the payment time of the transaction order.</td>
</tr>
</tbody>
</table>
<h4 id="Example-input"><a href="#Example-input" class="headerlink" title="Example input"></a>Example input</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"signature"</span>: <span class="string">"14d5b06a2a5a2ec509a148277ed4cbeb3c43301b239f080a3467ff0aba4070e3"</span>,</span><br><span class="line">  <span class="attr">"transaction_id"</span>: <span class="string">"20170707-wechat-3473511594933"</span>,</span><br><span class="line">  <span class="attr">"merchant_reference"</span>: <span class="string">"dsi39ej430sks03"</span>,</span><br><span class="line">  <span class="attr">"currency"</span>: <span class="string">"AUD"</span>,</span><br><span class="line">  <span class="attr">"amount"</span>: <span class="string">"120.00"</span>,</span><br><span class="line">  <span class="attr">"payment_method"</span>: <span class="string">"wechat"</span>,</span><br><span class="line">  <span class="attr">"status"</span>: <span class="string">"paid"</span>,</span><br><span class="line">  <span class="attr">"pay_time"</span>: <span class="string">"2017-07-07 10:53:50"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="SHA-256-HMAC-Signature-2"><a href="#SHA-256-HMAC-Signature-2" class="headerlink" title="SHA-256 HMAC Signature"></a>SHA-256 HMAC Signature</h4><p>Merchant backend need to validate the signature for protecting against malicious requests.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">message: merchant_reference + payment_method + status + currency + amount</span><br><span class="line">secret: api_key</span><br></pre></td></tr></table></figure>
<h4 id="Expected-the-text-“sent”-in-Response’s-body"><a href="#Expected-the-text-“sent”-in-Response’s-body" class="headerlink" title="Expected the text “sent” in Response’s body"></a>Expected the text “sent” in Response’s body</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sent</span><br></pre></td></tr></table></figure>
<h3 id="Query-Interface"><a href="#Query-Interface" class="headerlink" title="Query Interface"></a>Query Interface</h3><p>All customers can send request to search their transaction order by merchant order id(that should be unique id for the merchant) as merchant_reference by HTTP GET request.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET https://api.latipay.net/v2/transaction/&#123;merchant_reference&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Parameters-2"><a href="#Parameters-2" class="headerlink" title="Parameters"></a>Parameters</h4><table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>signature</td>
<td>String</td>
<td>The SHA-256 HMAC API signature.</td>
</tr>
<tr>
<td>user_id</td>
<td>String</td>
<td>The user account you want to use to process the transaction.</td>
</tr>
</tbody>
</table>
<h4 id="Example-Parameters-1"><a href="#Example-Parameters-1" class="headerlink" title="Example Parameters"></a>Example Parameters</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"signature"</span>: <span class="string">"14d5b06a2a5a2ec509a148277ed4cbeb3c43301b239f080a3467ff0aba4070e3"</span>,</span><br><span class="line">  <span class="attr">"user_id"</span>: <span class="string">"U000334333"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="SHA-256-HMAC-Signature-3"><a href="#SHA-256-HMAC-Signature-3" class="headerlink" title="SHA-256 HMAC Signature"></a>SHA-256 HMAC Signature</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">message: merchant_reference + user_id</span><br><span class="line">secret: api_key</span><br></pre></td></tr></table></figure>
<h4 id="Response-2"><a href="#Response-2" class="headerlink" title="Response"></a>Response</h4><table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>signature</td>
<td>String</td>
<td>The SHA-256 HMAC API signature.</td>
</tr>
<tr>
<td>transaction_id</td>
<td>String</td>
<td>A unique transaction identifier generated by Latipay.</td>
</tr>
<tr>
<td>merchant_reference</td>
<td>String</td>
<td>A field for identifying your transaction.</td>
</tr>
<tr>
<td>currency</td>
<td>String</td>
<td>The currency code of the transaction.</td>
</tr>
<tr>
<td>amount</td>
<td>String</td>
<td>A decimal amount.</td>
</tr>
<tr>
<td>payment_method</td>
<td>String</td>
<td>The payment method used. Possible values are wechat, alipay, jdpay, baidu-pay or online-bank.</td>
</tr>
<tr>
<td>status</td>
<td>String</td>
<td>The status of the transaction. Possible values are: pending, paid, or failed.</td>
</tr>
<tr>
<td>pay_time</td>
<td>String</td>
<td>Show the payment time of the transaction order.</td>
</tr>
</tbody>
</table>
<h4 id="Example-Response"><a href="#Example-Response" class="headerlink" title="Example Response"></a>Example Response</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"signature"</span>: <span class="string">"14d5b06a2a5a2ec509a148277ed4cbeb3c43301b239f080a3467ff0aba4070e3"</span>,</span><br><span class="line">  <span class="attr">"transaction_id"</span>: <span class="string">"20170707-wechat-3473511594933"</span>,</span><br><span class="line">  <span class="attr">"merchant_reference"</span>: <span class="string">"dsi39ej430sks03"</span>,</span><br><span class="line">  <span class="attr">"currency"</span>: <span class="string">"AUD"</span>,</span><br><span class="line">  <span class="attr">"amount"</span>: <span class="string">"120.00"</span>,</span><br><span class="line">  <span class="attr">"payment_method"</span>: <span class="string">"wechat"</span>,</span><br><span class="line">  <span class="attr">"status"</span>: <span class="string">"paid"</span>,</span><br><span class="line">  <span class="attr">"pay_time"</span>: <span class="string">"2017-07-07 10:53:50"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Signature-in-Response-1"><a href="#Signature-in-Response-1" class="headerlink" title="Signature in Response"></a>Signature in Response</h4><p>For security reasons, we highly recommend you verify the signature in the response.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">message: merchant_reference + payment_method + status + currency + amount</span><br><span class="line">secret: api_key</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="Query-Bank-List-Interface-Online-Banking"><a href="#Query-Bank-List-Interface-Online-Banking" class="headerlink" title="Query Bank List Interface - Online Banking"></a>Query Bank List Interface - Online Banking</h3><p>All customers can send a request to search one of the banks available.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET https://api.latipay.net/v2/banklist</span><br></pre></td></tr></table></figure>
<h4 id="Response-3"><a href="#Response-3" class="headerlink" title="Response"></a>Response</h4><table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>code</td>
<td>Integer</td>
<td>The response code of payment, 0 or error code.</td>
</tr>
<tr>
<td>message</td>
<td>String</td>
<td>The response message of bank list interface.</td>
</tr>
<tr>
<td>id</td>
<td>Integer</td>
<td>Bank id.</td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td>Bank name.</td>
</tr>
</tbody>
</table>
<h4 id="Example-Response-1"><a href="#Example-Response-1" class="headerlink" title="Example Response"></a>Example Response</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"code"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"message"</span>: <span class="string">"SUCCESS"</span>,</span><br><span class="line">    <span class="attr">"banklist"</span>: [&#123;</span><br><span class="line">            <span class="attr">"id"</span> : <span class="number">1</span>,</span><br><span class="line">            <span class="attr">"name"</span> : <span class="string">"中国银行信用卡"</span></span><br><span class="line">        &#125;,&#123;</span><br><span class="line">            <span class="attr">"id"</span> : <span class="number">85</span>,</span><br><span class="line">            <span class="attr">"name"</span> : <span class="string">"中国银行"</span></span><br><span class="line">        &#125;,&#123;</span><br><span class="line">            <span class="attr">"id"</span> : <span class="number">4</span>,</span><br><span class="line">            <span class="attr">"name"</span> : <span class="string">"中国建设银行"</span></span><br><span class="line">        &#125;,&#123;</span><br><span class="line">            <span class="attr">"id"</span> : <span class="number">9</span>,</span><br><span class="line">            <span class="attr">"name"</span> : <span class="string">"中国工商银行"</span></span><br><span class="line">        &#125;,&#123;</span><br><span class="line">            <span class="attr">"id"</span> : <span class="number">14</span>,</span><br><span class="line">            <span class="attr">"name"</span> : <span class="string">"平安银行"</span></span><br><span class="line">        &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Transaction-Interface-Online-Banking"><a href="#Transaction-Interface-Online-Banking" class="headerlink" title="Transaction Interface - Online Banking"></a>Transaction Interface - Online Banking</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">POST https://api.latipay.net/v2/transaction</span><br></pre></td></tr></table></figure>
<h4 id="Parameters-3"><a href="#Parameters-3" class="headerlink" title="Parameters:"></a>Parameters:</h4><table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Nullable</th>
</tr>
</thead>
<tbody>
<tr>
<td>signature</td>
<td>String</td>
<td>The SHA-256 HMAC API signature.</td>
<td>No</td>
</tr>
<tr>
<td>wallet_id</td>
<td>String</td>
<td>The ID of the wallet you want to use.</td>
<td>No</td>
</tr>
<tr>
<td>amount</td>
<td>String</td>
<td>A decimal amount.</td>
<td>No</td>
</tr>
<tr>
<td>user_id</td>
<td>String</td>
<td>The user account you want to use to process the transaction.</td>
<td>No</td>
</tr>
<tr>
<td>merchant_reference</td>
<td>String</td>
<td>A field for identifying your transaction.</td>
<td>No</td>
</tr>
<tr>
<td>currency</td>
<td>String</td>
<td>The currency code of the transaction.</td>
<td>No</td>
</tr>
<tr>
<td>return_url</td>
<td>String</td>
<td>The URL of the landing page where Latipay will return the customer after payment.</td>
<td>No</td>
</tr>
<tr>
<td>callback_url</td>
<td>String</td>
<td>The URL of the callback address the transaction notification is sent after payment.</td>
<td>No</td>
</tr>
<tr>
<td>ip</td>
<td>String</td>
<td>The IP address of the customer.</td>
<td>No</td>
</tr>
<tr>
<td>version</td>
<td>String</td>
<td>The latest version of the platform.</td>
<td>No</td>
</tr>
<tr>
<td>product_name</td>
<td>String</td>
<td>The name of the product or service being sold.</td>
<td>No</td>
</tr>
<tr>
<td>payment_method</td>
<td>String</td>
<td>Payment method options are wechat, alipay, or onlineBank.</td>
<td>No</td>
</tr>
<tr>
<td>host_type</td>
<td>String</td>
<td>must be “1”, which means Merchant hosted.</td>
<td>No</td>
</tr>
<tr>
<td>bank_id</td>
<td>Integer</td>
<td>Bank id which is used to process this transaction.</td>
<td>No</td>
</tr>
</tbody>
</table>
<h4 id="Example-Parameters-2"><a href="#Example-Parameters-2" class="headerlink" title="Example Parameters"></a>Example Parameters</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"signature"</span>: <span class="string">"14d5b06a2a5a2ec509a148277ed4cbeb3c43301b239f080a3467ff0aba4070e3"</span>,</span><br><span class="line">  <span class="attr">"wallet_id"</span>: <span class="string">"W00000001"</span>,</span><br><span class="line">  <span class="attr">"amount"</span>: <span class="string">"120.00"</span>,</span><br><span class="line">  <span class="attr">"user_id"</span>: <span class="string">"U000334333"</span>,</span><br><span class="line">  <span class="attr">"merchant_reference"</span>: <span class="string">"dsi39ej430sks03"</span>,</span><br><span class="line">  <span class="attr">"currency"</span>: <span class="string">"AUD"</span>,</span><br><span class="line">  <span class="attr">"return_url"</span>: <span class="string">"https://merchantsite.com/checkout"</span>,</span><br><span class="line">  <span class="attr">"callback_url"</span>: <span class="string">"https://merchantsite.com/confirm"</span>,</span><br><span class="line">  <span class="attr">"ip"</span>: <span class="string">"122.122.122.1"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"2.0"</span>,</span><br><span class="line">  <span class="attr">"product_name"</span>: <span class="string">"Pinot Noir, Otago"</span>,</span><br><span class="line">  <span class="attr">"payment_method"</span>: <span class="string">"online_banking"</span>,</span><br><span class="line">  <span class="attr">"host_type"</span> : <span class="string">"1"</span>,</span><br><span class="line">  <span class="attr">"bank_id"</span> : <span class="number">85</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="SHA-256-HMAC-Signature-4"><a href="#SHA-256-HMAC-Signature-4" class="headerlink" title="SHA-256 HMAC Signature"></a>SHA-256 HMAC Signature</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">message: user_id + wallet_id + amount + payment_method + return_url + callback_url</span><br><span class="line">secret: api_key</span><br></pre></td></tr></table></figure>
<h4 id="Example-Signature-1"><a href="#Example-Signature-1" class="headerlink" title="Example Signature"></a>Example Signature</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">message: U000000001W000000010.01alipayhttp://merchant.com/returnhttp://merchant.com/callback</span><br><span class="line">secret: 111222333</span><br><span class="line"></span><br><span class="line">signature: 2367bcd9e9a2f9a547c85d7545d1217702a574b8084bbb7ae33b45a03a89983</span><br></pre></td></tr></table></figure>
<h4 id="Response-4"><a href="#Response-4" class="headerlink" title="Response"></a>Response</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"code"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"message"</span>: <span class="string">"SUCCESS"</span>,</span><br><span class="line">    <span class="attr">"gatewaydata"</span>: &#123;</span><br><span class="line">      <span class="attr">"v_mid"</span>: <span class="string">"8321033"</span>,</span><br><span class="line">      <span class="attr">"v_oid"</span>: <span class="string">"20170913-8321033-3905576564619"</span>,</span><br><span class="line">      <span class="attr">"v_rcvname"</span>: <span class="string">"8321033"</span>,</span><br><span class="line">      <span class="attr">"v_rcvaddr"</span>: <span class="string">"8321033"</span>,</span><br><span class="line">      <span class="attr">"v_rcvtel"</span>: <span class="string">"00000000"</span>,</span><br><span class="line">      <span class="attr">"v_rcvpost"</span>: <span class="string">"8321033"</span>,</span><br><span class="line">      <span class="attr">"v_amount"</span>: <span class="string">"0.05"</span>,</span><br><span class="line">      <span class="attr">"v_ymd"</span>: <span class="string">"20170912"</span>,</span><br><span class="line">      <span class="attr">"v_orderstatus"</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">"v_ordername"</span>: <span class="string">"8321033"</span>,</span><br><span class="line">      <span class="attr">"v_moneytype"</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">"v_url"</span>: <span class="string">"http://api-staging.latipay.net/notify/sync/payease"</span>,</span><br><span class="line">      <span class="attr">"v_md5info"</span>: <span class="string">"4f34079e61711fd6c2a9cc01f96f99f8"</span>,</span><br><span class="line">      <span class="attr">"v_producttype"</span>: <span class="string">""</span>,</span><br><span class="line">      <span class="attr">"v_idtype"</span>: <span class="string">"01"</span>,</span><br><span class="line">      <span class="attr">"v_idnumber"</span>: <span class="string">"000000000000000"</span>,</span><br><span class="line">      <span class="attr">"v_idname"</span>: <span class="string">"none"</span>,</span><br><span class="line">      <span class="attr">"v_idcountry"</span>: <span class="number">156</span>,</span><br><span class="line">      <span class="attr">"v_idaddress"</span>: <span class="string">"none"</span>,</span><br><span class="line">      <span class="attr">"v_userref"</span>: <span class="string">"U00001534"</span>,</span><br><span class="line">      <span class="attr">"v_merdata1"</span>: <span class="string">""</span>,</span><br><span class="line">      <span class="attr">"v_pmode"</span>: <span class="literal">null</span>,</span><br><span class="line">      <span class="attr">"v_merdata5"</span>: <span class="string">"8f436"</span>,</span><br><span class="line">      <span class="attr">"v_merdata8"</span>: <span class="string">"8f4369c1"</span>,</span><br><span class="line">      <span class="attr">"v_itemquantity"</span>: <span class="string">"1"</span>,</span><br><span class="line">      <span class="attr">"v_itemunitprice"</span>: <span class="string">"0.05"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"paydata"</span>: &#123;</span><br><span class="line">        <span class="attr">"order_id"</span> : <span class="string">"20170829-alipay-3990527237343"</span>,</span><br><span class="line">            <span class="attr">"nonce"</span> : <span class="string">"7d5a88119354301ad3fc250404493bd27abf4467283a061d1ed11860a46e1bf3"</span>,</span><br><span class="line">            <span class="attr">"payment_method"</span> : <span class="string">"online_banking"</span>,</span><br><span class="line">            <span class="attr">"amount"</span> : <span class="string">"1.00"</span>,</span><br><span class="line">            <span class="attr">"amount_cny"</span> : <span class="string">"5.00"</span>,</span><br><span class="line">            <span class="attr">"currency"</span> : <span class="string">"NZD"</span>,</span><br><span class="line">            <span class="attr">"product_name"</span> : <span class="string">"test"</span>,</span><br><span class="line">            <span class="attr">"organisation_id"</span>: <span class="number">18</span>,</span><br><span class="line">            <span class="attr">"org_name"</span> : <span class="string">"Latipay"</span>,</span><br><span class="line">            <span class="attr">"user_id"</span> : <span class="string">"U000000051"</span>,</span><br><span class="line">            <span class="attr">"user_name"</span> : <span class="string">"Latipay test"</span>,</span><br><span class="line">            <span class="attr">"wallet_id"</span> : <span class="string">"W000000037"</span>,</span><br><span class="line">            <span class="attr">"wallet_name"</span> : <span class="string">"aud01"</span>,</span><br><span class="line">            <span class="attr">"qr_code"</span> : <span class="string">"https://qr.alipay.com/bax03286h4vlfpxldgwq4035"</span>,</span><br><span class="line">            <span class="attr">"currency_rate"</span> : <span class="string">"5.29930"</span>,</span><br><span class="line">            <span class="attr">"merchant_reference"</span> : <span class="string">"dsi39ej430sks03"</span>,</span><br><span class="line">            <span class="attr">"signature"</span>:<span class="string">"25e6e72cc6sdfecger95713afb101015aasdf3ca5faf3sdeer851f9cb7fb008a"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"gateway_url"</span> : <span class="string">"https://pay.yizhifubj.com/customer/gb/pay_bank_utf8.jsp"</span><span class="string">"</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>code</td>
<td>Integer</td>
<td>The reponse code of payment, 0 or error code.</td>
</tr>
<tr>
<td>message</td>
<td>String</td>
<td>The reponse message of transaction interface.</td>
</tr>
<tr>
<td>gatewaydata</td>
<td>Object</td>
<td>Merchant should submit gateway data to gateway url to process the transaction.</td>
</tr>
<tr>
<td>paydata</td>
<td>Object</td>
<td>This field is used to display the transaction detail.</td>
</tr>
<tr>
<td>gateway_url</td>
<td>String</td>
<td>Merchant should submit gateway data to this url to process the transaction.</td>
</tr>
</tbody>
</table>
<p><code>paydata</code> parameters</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>order_id</td>
<td>String</td>
<td>A unique transaction identifier generated by Latipay.</td>
</tr>
<tr>
<td>nonce</td>
<td>String</td>
<td>A unique transaction nonce generated by Latipay.</td>
</tr>
<tr>
<td>payment_method</td>
<td>String</td>
<td>Payment method options are wechat, alipay, or onlineBank.</td>
</tr>
<tr>
<td>amount</td>
<td>String</td>
<td>A decimal amount.</td>
</tr>
<tr>
<td>amount_cny</td>
<td>String</td>
<td>A decimal amount.</td>
</tr>
<tr>
<td>currency</td>
<td>String</td>
</tr>
<tr>
<td>product_name</td>
<td>String</td>
<td>The name of the product or service being sold.</td>
</tr>
<tr>
<td>organisation_id</td>
<td>Integer</td>
<td>The merchant id which is used to process the transaction.</td>
</tr>
<tr>
<td>org_name</td>
<td>String</td>
<td>The merchant’s name</td>
</tr>
<tr>
<td>user_id</td>
<td>String</td>
<td>The user account which is used to process the transaction.</td>
</tr>
<tr>
<td>user_name</td>
<td>String</td>
<td>The user account’s name</td>
</tr>
<tr>
<td>wallet_id</td>
<td>String</td>
<td>The user wallet account which is used to process the transaction.</td>
</tr>
<tr>
<td>wallet_name</td>
<td>String</td>
<td>The wallet account’s name</td>
</tr>
<tr>
<td>qr_code</td>
<td>String</td>
<td>The QR code is generate by Latipay or third gateway.</td>
</tr>
<tr>
<td>currency_rate</td>
<td>String</td>
<td>The rate which is used to the transaction.</td>
</tr>
<tr>
<td>merchant_reference</td>
<td>String</td>
<td>A field for identifying your transaction.</td>
</tr>
<tr>
<td>signature</td>
<td>String</td>
<td>The SHA-256 HMAC API signature.</td>
</tr>
</tbody>
</table>
<h4 id="SHA-256-HMAC-Signature-5"><a href="#SHA-256-HMAC-Signature-5" class="headerlink" title="SHA-256 HMAC Signature"></a>SHA-256 HMAC Signature</h4><p>Rearrange parameters in the <code>paydata</code> set alphabetically (except <code>signature</code> and other parameters with value of null or empty string) And connect rearranged parameters with &amp;：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">message: amount=1.00&amp;amount_cny=5.00&amp;currency=NZD&amp;currency_rate=5.29930&amp;merchant_reference=dsi39ej430sks03&amp;nonce=7d5a88119354301ad3fc250404493bd27abf4467283a061d1ed11860a46e1bf3&amp;order_id=20170829-alipay-3990527237343&amp;organisation_id=18&amp;org_name=Latipay&amp;payment_method=alipay&amp;product_name=test&amp;qr_code=https://qr.alipay.com/bax03286h4vlfpxldgwq4035&amp;type=Online&amp;user_id=U000000051&amp;wallet_id=W000000037&amp;wallet_name=aud01</span><br><span class="line">secret: api_key</span><br></pre></td></tr></table></figure>
  
    <div class="guide-links">
      
        <span>← <a href="/v2/latipay-hosted.html">Latipay Hosted</a></span>
      
      
        <span style="float: right;"><a href="/v2/in-store-payment.html">In-store Payment Solution(WeChat / Alipay)</a> →</span>
      
    </div>
  
  <div class="footer">
  </div>
</div>

        
      </div>
      <script src="/js/smooth-scroll.min.js"></script>
    

    <!-- main custom script for sidebars, version selects etc. -->
    <script src="/js/css.escape.js"></script>
    <script src="/js/common.js"></script>


    <!-- fastclick -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
      FastClick.attach(document.body)
    }, false)
    </script>
  </body>
</html>
